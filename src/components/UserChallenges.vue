<template>
  <div class="user-challenges">
    <ul
      v-for="(challenge, title) in userChallengeDatas"
      :key="challenge.id"
      class="challenge_list"
    >
      <li class="challenge_item">
        <div class="item_title-container">
          <svg
            class="challenge_icon"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 40 50"
            x="0px"
            y="0px"
          >
            <title>award-awards-challenge-trophy</title>
            <path
              d="M20,36A16,16,0,1,1,36,20,16.019,16.019,0,0,1,20,36ZM20,6A14,14,0,1,0,34,20,14.015,14.015,0,0,0,20,6Z"
            />
            <path
              d="M27.639,12.368H24.868V10.69a.5.5,0,0,0-.5-.5H15.632a.5.5,0,0,0-.5.5v1.678H12.36a.5.5,0,0,0-.5.5V16.5a5.03,5.03,0,0,0,3.273,4.8,4.61,4.61,0,0,0,1.238,3.328,3.865,3.865,0,0,0,2.083,1.03l-.093,2.02H17.68a.5.5,0,0,0-.46.3l-.976,2.286a.5.5,0,0,0,.46.7H23.3a.5.5,0,0,0,.459-.7l-.978-2.286a.5.5,0,0,0-.459-.3h-.683l-.09-2.02a3.864,3.864,0,0,0,2.082-1.029A4.615,4.615,0,0,0,24.866,21.3a5.029,5.029,0,0,0,3.273-4.8V12.868A.5.5,0,0,0,27.639,12.368ZM15.131,19.593A3.424,3.424,0,0,1,13.4,16.5V13.9h1.737ZM26.606,16.5a3.417,3.417,0,0,1-1.738,3.1V13.9h1.738Z"
            />
          </svg>
          <div class="item_title-subcontainer">
            <span class="h3">{{ title }}</span>
            <svg
              class="challenge_poster-icon"
              v-if="challenge.status === 'activated'"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              xml:space="preserve"
              version="1.1"
              style="
                shape-rendering: geometricPrecision;
                text-rendering: geometricPrecision;
                image-rendering: optimizeQuality;
              "
              viewBox="0 0 80 100"
              x="0px"
              y="0px"
              fill-rule="evenodd"
              clip-rule="evenodd"
            >
              <defs></defs>
              <g>
                <path
                  class="fil0"
                  d="M12.639 35.858l7.804 0.7 14.617 -24.601 1.719 1.016 -14.131 23.783 37.169 3.335 -15.281 -27.034 1.735 -0.977 15.954 28.227 8.349 0.749c2.143,0.193 4.007,1.237 5.282,2.764 1.277,1.528 1.974,3.545 1.782,5.679l-1.834 20.434c-0.192,2.143 -1.236,4.007 -2.763,5.282 -1.487,1.243 -3.437,1.936 -5.507,1.795l-58.108 -5.211c-2.143,-0.193 -4.006,-1.237 -5.282,-2.764 -1.276,-1.529 -1.973,-3.545 -1.782,-5.68l1.834 -20.434c0.192,-2.143 1.236,-4.006 2.763,-5.281 1.488,-1.243 3.437,-1.936 5.507,-1.796l0.173 0.014zm48.468 16.186l5.176 10.687 0.78 -10.183c0.051,-0.661 0.217,-1.142 0.495,-1.447 0.278,-0.305 0.632,-0.438 1.063,-0.395 0.441,0.045 0.781,0.244 1.011,0.6 0.231,0.356 0.321,0.867 0.27,1.529l-1.031 13.453c-0.115,1.502 -0.727,2.195 -1.837,2.083 -0.278,-0.028 -0.524,-0.097 -0.741,-0.211 -0.213,-0.11 -0.412,-0.275 -0.59,-0.485 -0.181,-0.215 -0.341,-0.46 -0.488,-0.74 -0.147,-0.276 -0.294,-0.559 -0.441,-0.847l-5.039 -10.545 -0.768 10.016c-0.05,0.653 -0.223,1.133 -0.519,1.44 -0.3,0.307 -0.661,0.44 -1.084,0.397 -0.438,-0.044 -0.778,-0.247 -1.015,-0.612 -0.241,-0.366 -0.335,-0.873 -0.285,-1.518l1.011 -13.195c0.043,-0.561 0.134,-0.993 0.269,-1.301 0.158,-0.338 0.401,-0.602 0.723,-0.794 0.323,-0.189 0.663,-0.267 1.015,-0.231 0.281,0.028 0.515,0.104 0.703,0.223 0.192,0.124 0.356,0.277 0.492,0.463 0.136,0.186 0.272,0.421 0.408,0.712 0.136,0.286 0.278,0.586 0.422,0.901zm-8.279 0.057l-6.974 -0.703 -0.322 4.207 6.422 0.647c0.473,0.048 0.816,0.203 1.029,0.461 0.217,0.259 0.307,0.585 0.277,0.972 -0.029,0.386 -0.168,0.693 -0.414,0.913 -0.25,0.22 -0.612,0.308 -1.092,0.259l-6.422 -0.647 -0.373 4.876 7.211 0.727c0.488,0.049 0.844,0.214 1.071,0.49 0.23,0.276 0.328,0.627 0.296,1.045 -0.031,0.403 -0.181,0.721 -0.449,0.946 -0.265,0.227 -0.641,0.317 -1.128,0.268l-8.411 -0.848c-0.673,-0.068 -1.144,-0.284 -1.413,-0.648 -0.27,-0.364 -0.378,-0.921 -0.321,-1.666l0.986 -12.868c0.039,-0.498 0.137,-0.897 0.293,-1.199 0.156,-0.301 0.38,-0.512 0.672,-0.627 0.292,-0.115 0.657,-0.15 1.095,-0.106l8.172 0.824c0.495,0.05 0.852,0.21 1.071,0.477 0.219,0.271 0.316,0.606 0.286,1.001 -0.031,0.406 -0.178,0.72 -0.435,0.943 -0.257,0.219 -0.633,0.306 -1.127,0.256zm-18.972 5.916l-2.836 -0.286 -0.371 4.844c-0.053,0.693 -0.239,1.201 -0.558,1.53 -0.319,0.329 -0.703,0.471 -1.144,0.426 -0.466,-0.047 -0.83,-0.26 -1.088,-0.643 -0.257,-0.384 -0.359,-0.92 -0.307,-1.601l1.011 -13.19c0.058,-0.761 0.257,-1.291 0.595,-1.586 0.338,-0.295 0.845,-0.409 1.528,-0.34l3.97 0.4c1.175,0.119 2.071,0.309 2.689,0.576 0.611,0.259 1.127,0.636 1.548,1.132 0.42,0.5 0.723,1.085 0.908,1.762 0.189,0.677 0.249,1.426 0.187,2.243 -0.134,1.744 -0.715,3.015 -1.742,3.818 -1.029,0.8 -2.49,1.106 -4.39,0.915zm-0.15 -7.916l-2.085 -0.21 -0.401 5.234 2.085 0.211c0.729,0.073 1.348,0.047 1.852,-0.075 0.501,-0.122 0.896,-0.363 1.185,-0.727 0.286,-0.361 0.453,-0.862 0.502,-1.491 0.058,-0.757 -0.094,-1.391 -0.453,-1.905 -0.406,-0.55 -1.301,-0.898 -2.685,-1.037zm-15.141 -4.441c1.587,0.16 2.919,0.656 3.998,1.491 1.08,0.832 1.863,1.942 2.344,3.328 0.482,1.385 0.655,2.972 0.518,4.761 -0.101,1.322 -0.354,2.509 -0.757,3.557 -0.403,1.051 -0.952,1.939 -1.653,2.668 -0.701,0.728 -1.53,1.254 -2.495,1.582 -0.964,0.325 -2.044,0.429 -3.247,0.307 -1.195,-0.12 -2.249,-0.443 -3.159,-0.972 -0.913,-0.526 -1.653,-1.215 -2.226,-2.064 -0.573,-0.848 -0.977,-1.84 -1.216,-2.98 -0.24,-1.137 -0.308,-2.348 -0.21,-3.63 0.101,-1.315 0.36,-2.502 0.783,-3.567 0.422,-1.062 0.981,-1.945 1.68,-2.653 0.696,-0.705 1.52,-1.215 2.469,-1.529 0.946,-0.319 2.004,-0.417 3.171,-0.299zm3.724 9.239c0.096,-1.25 -0.003,-2.356 -0.292,-3.313 -0.292,-0.953 -0.755,-1.698 -1.388,-2.239 -0.632,-0.538 -1.386,-0.851 -2.255,-0.938 -0.615,-0.062 -1.198,0.012 -1.741,0.218 -0.546,0.209 -1.027,0.543 -1.443,1.003 -0.415,0.46 -0.763,1.067 -1.042,1.817 -0.277,0.755 -0.454,1.613 -0.528,2.577 -0.074,0.976 -0.031,1.863 0.125,2.674 0.161,0.807 0.42,1.492 0.779,2.05 0.359,0.558 0.788,0.99 1.284,1.297 0.5,0.312 1.056,0.496 1.675,0.558 0.793,0.08 1.536,-0.069 2.236,-0.444 0.695,-0.376 1.274,-1.008 1.74,-1.897 0.462,-0.884 0.746,-2.008 0.85,-3.363zm18.429 -51.928c2.402,0 4.35,1.948 4.35,4.35 0,2.402 -1.948,4.35 -4.35,4.35 -2.402,0 -4.35,-1.948 -4.35,-4.35 0,-2.402 1.948,-4.35 4.35,-4.35zm29.512 42.054l-57.935 -5.199c-1.038,-0.093 -2.023,0.25 -2.773,0.876 -0.749,0.625 -1.261,1.526 -1.357,2.55l-1.834 20.447c-0.093,1.038 0.249,2.023 0.876,2.773 0.628,0.752 1.533,1.266 2.563,1.358l57.936 5.198c1.037,0.094 2.022,-0.249 2.773,-0.875 0.748,-0.626 1.261,-1.526 1.356,-2.55l1.835 -20.447c0.093,-1.038 -0.25,-2.023 -0.877,-2.774 -0.627,-0.752 -1.533,-1.265 -2.563,-1.357z"
                />
              </g>
            </svg>
            <svg
              class="challenge_poster-icon challenge_poster-icon--close"
              v-else
              height="100px"
              width="100px"
              fill="#000000"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              version="1.1"
              x="0px"
              y="0px"
              viewBox="0 0 100 100"
              enable-background="new 0 0 100 100"
              xml:space="preserve"
            >
              <path
                d="M75,30.1C75,16.3,63.9,5,50,5C36.1,5,25,16.3,25,30.1v8.5c-6.2,0.9-10.8,6.1-10.8,12.6v31C14.1,89.3,19.8,95,27,95h46.1  c7.1,0,12.8-5.7,12.8-12.9v-31c0-6.5-4.7-11.6-10.8-12.6V30.1z M52.6,80.5c0,1.4-1.1,2.6-2.6,2.6c-1.3,0-2.5-1.2-2.5-2.6V67.4  c-3-1.2-5.2-3.9-5.2-7.3c0-4.3,3.5-7.7,7.7-7.7c4.2,0,7.7,3.5,7.7,7.7c0,3.5-2.2,6.2-5.1,7.3V80.5z M34.1,38.4v-8.3  c0-8.9,7-15.9,15.8-15.9c8.9,0,15.9,7,15.9,15.9v8.3H34.1z"
              ></path>
            </svg>
          </div>
        </div>
        <div class="item_container">
          <div class="item_text-container">
            <span class="item_text"> Statut : </span>
            <span class="item_number-container">
              <span class="item_number">
                {{ challenge.status === "activated" ? "En cours" : "Terminé" }}
              </span>
            </span>
          </div>
          <div class="item_text-container">
            <span class="item_text"> challenge réalisé : </span>
            <span class="item_number-container">
              <span class="item_number">
                {{ challenge.done }}
              </span>
              <span class="item_number-divisor"> /{{challenge.total}} </span>
            </span>
          </div>
          <div class="item_text-container">
            <span class="item_text"> Score total : </span>
            <span class="item_number-container">
              <span class="item_number">
                {{ challenge.score.total }}
              </span>
            </span>
          </div>
        </div>
      </li>
    </ul>
  </div>
</template>

<script>
export default {
  name: "UserChallenges",
  data() {
    return {
      userChallengeDatas: null,
    };
  },
  props: {
    userChallenges: Object,
  },
  created() {
    this.userChallengeDatas = this.userChallenges.statistic.achievement.category;
  },
};
</script>


<style lang="scss">
.challenge_item {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  margin-top: 5px;
  padding-left: 15px;
  padding-right: 15px;
  color: #3e4040;

  .item_container {
    margin-left: 30px;
    padding: 15px;
    text-align: left;
    background-color: #ececec;
  }

  .item_text {
    font-size: 15px;
  }
  .item_number {
    font-weight: 600;
  }
  .item_number-divisor {
    font-size: 13px;
  }
}
.item_title-container {
  display: flex;

  // picto trophée
  .challenge_icon {
    width: 20px;
    margin-right: 10px;
    fill: var(--light_blue);
  }

  .item_title-subcontainer {
    position: relative;

    // pancarte open
    .challenge_poster-icon {
      width: 50px;
      position: absolute;
      top: 30px;
      right: -50px;
      transform-origin: top;

      animation-name: balance;
      animation-timing-function: ease-in-out;
      animation-duration: 1s;
      animation-direction: alternate;
      animation-iteration-count: infinite;

      &.challenge_poster-icon--close {
        width: 25px;
        top: -10px;
        right: -60px;
        animation: unset;
        transform: rotate(30deg)
      }
    }
  }
  @keyframes balance {
    from {
      transform: rotate(-30deg);
    }
    to {
      transform: rotate(30deg);
    }
  }
}
</style>
